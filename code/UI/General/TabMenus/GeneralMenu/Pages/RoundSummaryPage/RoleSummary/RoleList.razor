@using System.Collections.Generic;
@using System;
@using TTT;

@namespace TTT.UI

@if (Players.IsNullOrEmpty())
{
    return;
}

<root class="text-shadow">
    <div class="header" style="background-color: @(@Role.Color.Hex)">
        <text class="role">@($"{Role.Title} - {Players.Count}")</text>
        <text class="karma">Karma</text>
        <text class="score">Score</text>
    </div>
    <div style="flex-direction: column; overflow: scroll;">
        @foreach (var player in Players)
        {
            <div class="player">
                <img src="avatar:@player.SteamId" class="avatar" />
                <text class="name">@player.SteamName</text>
                <div style="flex-grow: 1;" />
                <text class="karma">@(Math.Round(player.BaseKarma))</text>
                <text class="score">@player.Score</text>
            </div>
        }
    </div>
</root>

@code {
    public Role Role { get; set; }
    public List<TTT.Player> Players { get; set; }
}

<style>
    RoleList {
        flex-direction: column;
        width: 100%;
        padding: 10px;

        .header {
            border-radius: 4 4 0 0;
            flex-shrink: 0;
            font-weight: 600;
            align-items: center;
            padding: 3 8 3 8;

            .role {
                flex-grow: 1;
            }

            .karma {
                width: 70px;
                text-align: right;
            }

            .score {
                width: 70px;
                text-align: right;
            }
        }

        .player {
            height: 40px;
            align-items: center;
            font-weight: 500;
            display: flex;
            flex-shrink: 0;
            padding: 3 8 3 8;

            .avatar {
                height: 25px;
                width: 25px;
                border-radius: 4px;
            }

            .name {
                margin-left: 8px;
            }

            .karma {
                width: 70px;
                text-align: right;
            }

            .score {
                width: 70px;
                text-align: right;
            }

            &:nth-child(odd) {
                background-color: #0a0a0a66;
            }

            &:nth-child(even) {
                background-color: #4b4b4b15;
            }

            &.me:nth-child(1) {
                background-color: #f2b42d1a;
            }

            &:last-child {
                border-bottom-left-radius: 4px;
                border-bottom-right-radius: 4px;
            }
        }
    }
</style>