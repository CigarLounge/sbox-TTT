@using System;
@using Sandbox;

@namespace TTT.UI

@if (Client.Pawn is not TTT.Player player)
{
    return;
}

@{
    var backgroundColor = player.Role is not NoneRole and not Innocent
            ? $"background-color: {player.Role.Color.WithAlpha(0.10f).Hex}"
            : $"background-color: #4b4b4b15";
    <root @onclick=@OnClick class="text-shadow @(Client == Game.LocalClient ? "local" : "")" style="@backgroundColor">
        <div class="entry">
            <img src="avatar:@Client.SteamId" class="avatar rounded" />
            <text class="name-label">@Client.Name</text>
            <text @ref="Tag" class="tag-label"></text>
            <text class="stat">@MathF.Round( player.BaseKarma ).ToString()</text>
            <text class="stat">@player.Score.ToString()</text>
            <text class="stat">@(Client.IsBot ? "BOT" : Client.Ping.ToString())</text>
        </div>
    </root>
}

<style>
    ScoreboardEntry {
        display: flex;
        flex-direction: column;
        flex-shrink: 0;

        .entry {
            width: 100%;
            height: 38px;
            align-items: center;
            justify-content: space-between;
            font-size: 14px;
            font-weight: 500;
            padding: 8px;
            height: 38px;

            .avatar {
                height: 25px;
                width: 25px;
            }

            .name-label {
                margin-left: 8px;
                font-size: 16px;
                font-weight: 600;
                flex-grow: 1;
            }

            .stat {
                width: 125px;
                font-weight: 700;
            }

            &:last-child {
                border-bottom-left-radius: 4px;
                border-bottom-right-radius: 4px;
            }
        }

        .dropdown {
            justify-content: center;
            transition: height 0.1s ease-out;
            transition: opacity 0.01s ease-out;
            height: 40px;

            .friend {
                color: #01f901;
            }

            .suspect {
                color: #b3b314;
            }

            .kill {
                color: #f30302;
            }

            .missing {
                color: #82be82;
            }

            &:intro,
            &:outro {
                opacity: 0;
                height: 0px;
            }
        }

        .local {
            background-color: #f2b42d1a;
        }
    }
</style>